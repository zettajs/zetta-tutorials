## Zetta Tutorial 1: Hello World

Welcome to Zetta! In this tutorial, you will build the Zetta version of "Hello, World!". When you finish, you will know how to:

* Create a basic Zetta project 
* Configure and start the Zetta server to run on a hub (your laptop)
* Call the Zetta device REST API

![Zetta Server](https://github.com/WWitman/zettajs-tutorials/blob/master/images/zetta-hub.png)

In later tutorials, you'll build out this basic Zetta project with more functionality.


## Before you begin

To complete this tutorial, you must have Node.js installed on your system. We assume you understand the basics of Node.js and can create and run simple Node.js programs. See [About the Zetta Tutorials](https://github.com/WWitman/zettajs-tutorials/blob/master/README.md) for details. 

## Create the Zetta project

1. Create a project directory. You can name it anything you wish. In this tutorial, call it `hello-world`. 

2. Change to the `hello-world` directory and do the following steps:

    a. Execute this command to create a new Node.js project: 

      `npm init`

    b. Hit return several times to accept all the defaults. This step creates a `package.json` file, which contains meta information about the project and its dependencies. The `package.json` file should look like this:

    ```
    {
      "name": "hello-world",
      "version": "1.0.0",
      "description": "Welcome to Zetta! In this tutorial, you will build the Zetta version of \"Hello, World!\". When you finish, you will know how to:",
      "main": "index.js",
      "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1"
      },
      "author": "",
      "license": "ISC",
      "dependencies": {
        "zetta": "^0.33.0"
      }
    }
    ```

    c. Install the `zetta` Node.js module. The `--save` option adds `zetta` to the `package.json` dependencies list. 

      `npm install zetta --save`


You now have a bare-bones Zetta project containing a `node_modules` directory and a `package.json` file. Next, you'll configure the Zetta server.

## What is the Zetta server?

The Zetta server communicates and coordinates with physical devices on a network (imagine a bunch of IoT-enabled robot arms, lights, or sensors), and generates REST APIs that you can use to interact with those devices over HTTP. For example, you might raise and lower a robot arm from a web browser using HTTP APIs generated by the Zetta server. 

## Configure the Zetta server

Let's set up a Zetta server and run it locally. It's easy to do.

1. Be sure you're in the `hello-world` directory.

2. In a text editor, create a new file called `index.js`, and copy this code into it:

  ```js
  var zetta = require('zetta');

  zetta()
    .name('Server Name')
    .listen(1337, function(){
       console.log('Zetta is running at http://127.0.0.1:1337');
  });
  ```


3. In your editor, replace `'Server Name'` with `'Hello Zetta Server'`. 

  ```js
  var zetta = require('zetta');

  zetta()
    .name('Hello Zetta Server')
    .listen(1337, function(){
       console.log('Zetta is running at http://127.0.0.1:1337');
  });
  ```


4. Save the file.

You now have a minimally configured Zetta server. Next, you'll start the server up and hit its API. 

## Start the server

In the `hello-world` directory, enter this command: 

`node index.js`

You'll see output like the following. The output confirms that the server is running on port 1337 and tells you the name of the server (Hello Zetta).

```
Jan-22-2016 10:18:36 [server] Server (Hello Zetta Server) Hello Zetta Server listening on http://127.0.0.1:1337
Zetta is running at http://127.0.0.1:1337
```


## Call the Zetta API

We mentioned before that the Zetta server creates a REST API that you can call over any HTTP client. Let's see how that works.

**Key point:** The Zetta API is a built-in, out-of-the-box feature of Zetta. The Zetta server automatically generates APIs for devices that it recognizes. These APIs let you interact with the recognized devices. In a later tutorial, you will create an LED device that you can turn on and off using APIs.

>Note: Zetta APIs are RESTful hypermedia APIs. Essentially, this means that each API response includes links that let you discover what further actions you can perform with the API. The pattern is analogous to the way web pages work, where hyperlinks lead you to related web content. 

First, start by calling the server's root URL, which is:

`http://127.0.0.1:1337`

If you have cURL installed, you can do this:

`curl http://127.0.0.1:1337`

>Tips: You can use a REST client like Postman or Advanced REST Client to call the URL. It's a good idea to obtain and begin working with these (or similar) tools if you intend to develop Zetta applications. If you use the Chrome browser, you can install a plugin called JSONView, which formats JSON responses nicely. 

The Zetta server returns a JSON object (shown below) that describes the **root** class of the API. The response describes the current state of the Zetta API and includes links to resources provided by the API (you'll explore these links in the next section). 

At this point, our API doesn't do much, but as you start adding devices to the server, the API will expand to support those devices. For example, in the next tutorial, you'll create a device that lets us turn a virtual switch on and off by calling Zetta APIs. 

```json
{
  "class": [
    "root"
  ],
  "links": [
    {
      "rel": [
        "self"
      ],
      "href": "http://localhost:1337/"
    },
    {
      "title": "Hello, Zetta!",
      "rel": [
        "http://rels.zettajs.io/server"
      ],
      "href": "http://localhost:1337/servers/Hello%20Zetta"
    },
    {
      "rel": [
        "http://rels.zettajs.io/peer-management"
      ],
      "href": "http://localhost:1337/peer-management"
    }
  ],
  "actions": [
    {
      "name": "query-devices",
      "method": "GET",
      "href": "http://localhost:1337/",
      "type": "application/x-www-form-urlencoded",
      "fields": [
        {
          "name": "server",
          "type": "text"
        },
        {
          "name": "ql",
          "type": "text"
        }
      ]
    }
  ]
}
```


>Note: The Zetta API conforms to the [Siren hypermedia specification](https://github.com/kevinswiber/siren). You can read about Siren on the GitHub repository. 

## Follow the /servers link

If you follow the `/servers` link (in the `links` part of the JSON response), it returns the API for the "Hello World" server itself. That is, it's the API for whatever entities and actions are attached to the server. In this manner, app developers can crawl the Zetta API to discover what it can do. 

Try hitting this link:

`http://localhost:1337/servers/Hello%20Zetta`

At this time, no devices are attached to the server. If there were, they'd be listed in the `entities` array. Note, however, the API has a `query-devices` action. In the next tutorial, you'll see how to add a state-machine device to the Zetta server and turn it on and off using APIs. 

```json
{
  "class": [
    "server"
  ],
  "properties": {
    "name": "Hello Zetta"
  },
  "entities": [],
  "actions": [
    {
      "name": "query-devices",
      "method": "GET",
      "href": "http://localhost:1337/servers/Hello%20Zetta",
      "type": "application/x-www-form-urlencoded",
      "fields": [
        {
          "name": "ql",
          "type": "text"
        }
      ]
    }
  ],
  "links": [
    {
      "rel": [
        "self"
      ],
      "href": "http://localhost:1337/servers/Hello,%20Zetta!"
    },
    {
      "rel": [
        "http://rels.zettajs.io/metadata"
      ],
      "href": "http://localhost:1337/servers/Hello%20Zetta/meta"
    },
    {
      "rel": [
        "monitor"
      ],
      "href": "ws://localhost:1337/servers/Hello%20Zetta/events?topic=logs"
    }
  ]
}
```


## Summary

Congratulations! You've configured and run a functioning Zetta server. In the next tutorial, you'll wire up a device driver that implements a simple state device (on/off switch) and control the device using the Zetta API.

